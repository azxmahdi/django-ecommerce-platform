{% extends "bases/base_dashboard.html" %}
{% load price_filters jalali_tags payment_tags format_times %}
{% block title %} سفارشات {% endblock title %}
{% block extra_css %}
<svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
  <symbol id="clock" viewBox="0 0 24 24">
    <path fill="currentColor" d="M12 2C6.5 2 2 6.5 2 12s4.5 10 10 10s10-4.5 10-10S17.5 2 12 2m0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8s8 3.59 8 8s-3.59 8-8 8m.5-13H11v6l5.2 3.2l.8-1.3l-4.5-2.7V7z"/>
  </symbol>
  <symbol id="cancel" viewBox="0 0 24 24">
    <path fill="currentColor" d="M12 2C6.47 2 2 6.47 2 12s4.47 10 10 10s10-4.47 10-10S17.53 2 12 2m0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8s8 3.59 8 8s-3.59 8-8 8m3.59-5L12 10.41L8.41 14L7 12.59L10.59 9L7 5.41L8.41 4L12 7.59L15.59 4L17 5.41L13.41 9L17 12.59z"/>
  </symbol>
  <symbol id="return" viewBox="0 0 24 24">
    <path fill="currentColor" d="M17.01 14h-.8l-.27-.27a6.451 6.451 0 0 0 1.57-4.23c0-3.59-2.91-6.5-6.5-6.5s-6.5 3-6.5 6.5H2l3.84 4l4.16-4H6.51a4.5 4.5 0 0 1 4.5-4.5a4.5 4.5 0 0 1 4.5 4.5a4.5 4.5 0 0 1-1.32 3.21l1.41 1.41c.8-.8 1.41-1.77 1.41-2.82zM18 10h-2v6h-3l4 4l4-4h-3z"/>
  </symbol>
  <symbol id="chevron-left" viewBox="0 0 24 24">
    <path fill="currentColor" d="M15.41 7.41L14 6l-6 6l6 6l1.41-1.41L10.83 12z"/>
  </symbol>
  <symbol id="warning" viewBox="0 0 24 24">
    <path fill="currentColor" d="M1 21h22L12 2L1 21zm12-3h-2v-2h2v2zm0-4h-2v-4h2v4z"/>
  </symbol>
  <symbol id="delivery" viewBox="0 0 24 24">
    <path fill="currentColor" d="M18 18.5c.83 0 1.5-.67 1.5-1.5s-.67-1.5-1.5-1.5s-1.5.67-1.5 1.5s.67 1.5 1.5 1.5m1.5-9H17V12h4.46L19.5 9.5M6 18.5c.83 0 1.5-.67 1.5-1.5s-.67-1.5-1.5-1.5s-1.5.67-1.5 1.5s.67 1.5 1.5 1.5M20 8l3 4v5h-2c0 1.66-1.34 3-3 3s-3-1.34-3-3H9c0 1.66-1.34 3-3 3s-3-1.34-3-3H1V6c0-1.11.89-2 2-2h14v4h3M3 6v9h.76c.55-.61 1.35-1 2.24-1s1.69.39 2.24 1H15V6H3Z"/>
  </symbol>
  <symbol id="outline-check" viewBox="0 0 24 24">
    <path fill="currentColor" d="M12 2C6.59 2 2 6.59 2 12s4.59 10 10 10s10-4.59 10-10S17.41 2 12 2zm0 18c-4.42 0-8-3.58-8-8s3.58-8 8-8s8 3.58 8 8s-3.58 8-8 8zm4.59-12.42L10 14.17l-2.59-2.58L6 13l4 4l8-8l-1.41-1.42z"/>
  </symbol>
  <symbol id="order-pending" viewBox="0 0 24 24">
    <path fill="currentColor" d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10s10-4.48 10-10S17.52 2 12 2m0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8s8 3.59 8 8s-3.59 8-8 8m1-13h-2v6h6v-2h-4V7z"/>
  </symbol>
  <symbol id="order-process" viewBox="0 0 24 24">
    <path fill="currentColor" d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10s10-4.48 10-10S17.52 2 12 2m0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8s8 3.59 8 8s-3.59 8-8 8m-1-12v8l6.5-4L11 7z"/>
  </symbol>
  <symbol id="order-sent" viewBox="0 0 24 24">
    <path fill="currentColor" d="M19 9h-2V7c0-1.1-.9-2-2-2H5c-1.1 0-2 .9-2 2v10c0 1.1.9 2 2 2h10c1.1 0 2-.9 2-2v-2h2c1.1 0 2-.9 2-2V11c0-1.1-.9-2-2-2M7 17l-2-2l2-2V9h2v2l2 2l-2 2V15H7v2z"/>
  </symbol>
  <symbol id="order-returned" viewBox="0 0 24 24">
    <path fill="currentColor" d="M17.66 8L12 2.35L6.34 8C4.78 9.56 4 11.64 4 13.64s.78 4.11 2.34 5.67s3.61 2.33 5.66 2.33s4.1-.79 5.66-2.33s2.34-3.61 2.34-5.67s-.78-4.08-2.34-5.64M12 20c-1.48 0-2.85-.43-4-1.15c-2.29-1.33-3.85-3.82-3.85-6.85s1.56-5.52 3.85-6.85C9.15 4.43 10.52 4 12 4s2.85.43 4 1.15c2.29 1.33 3.85 3.82 3.85 6.85s-1.56 5.52-3.85 6.85c-1.15.72-2.52 1.15-4 1.15z"/>
  </symbol>

</svg>
{% endblock extra_css %}
{% block dashboard_content %}
            <!-- content -->
            <div class="col-span-12 lg:col-span-9">
              <div class="rounded-lg bg-muted p-5 shadow-base">
                <!-- Title -->
                <h1 class="relative mb-16 w-fit text-xl font-medium">
                  سفارشات شما
                  <span
                    class="absolute right-0 top-10 h-[3px] w-full rounded-full bg-primary"
                  >
                  </span>
                </h1>
                <div class="mb-8">
                  <div
                    class="mb-8 flex flex-wrap items-center justify-between gap-4"
                  >
                    <h2 class="flex items-center gap-x-4 text-lg text-text/90">
                      <span class="h-2 w-2 rounded-full bg-primary"></span>
                      سفارشات در انتظار پرداخت
                    </h2>
                  </div>
                  <div class="space-y-4">
                    {% for pending_order in pending_orders %}
                    <!-- order item -->
                    <div>
                      <a href=""> 
                        <div class="rounded-lg border p-4 shadow-base">
                          <!-- head -->
                          <div class="flex items-center justify-between pb-6">
                            <div
                              class="flex items-center gap-x-2 text-yellow-500 dark:text-yellow-400"
                            >
                              <svg class="h-6 w-6">
                                <use xlink:href="#warning" />
                              </svg>
                              <p class="font-medium md:text-lg">
                                در انتظار پرداخت
                              </p>
                            </div>
                            <svg class="h-6 w-6">
                              <use xlink:href="#chevron-left" />
                            </svg>
                          </div>
                          <!-- conent -->
                          <div
                            class="flex flex-col gap-6 lg:flex-row lg:justify-between xl:gap-16"
                          >
                            <div class="flex flex-col gap-4 md:flex-row">
                              <div
                                class="flex items-center justify-between gap-x-2 md:justify-start"
                              >
                                <div class="text-sm text-text/60 md:text-base">
                                  زمان باقیمانده
                                </div>
                                <div
                                  class="text-sm text-red-500 dark:text-red-400 md:text-base"
                                >
                                {{ pending_order.latest_payment_created|remaining_minutes }} دقیقه

                                </div>
                              </div>
                              <div
                                class="flex items-center justify-between gap-x-2 md:justify-start"
                              >
                                <div class="text-sm text-text/60 md:text-base">
                                  شماره سفارش
                                </div>
                                <div class="text-sm text-text/90 md:text-base">
                                  #{{ pending_order.id }}
                                </div>
                              </div>
                              <div
                                class="flex items-center justify-between gap-x-2 md:justify-start"
                              >
                                <div class="text-sm text-text/60 md:text-base">
                                  مبلغ کل
                                </div>
                                <div class="text-primary">
                                  <span class="font-bold md:text-lg"
                                    >{{ pending_order.get_amount|format_price }}</span
                                  >
                                  <span class="text-sm md:text-base"
                                    >تومان</span
                                  >
                                </div>
                              </div>
                            </div>
                          </div>
                        </div>
                      </a>
                    </div>
                    {% endfor %}
                  </div>
                </div>
                <div class="mb-8">
                  <div
                    class="mb-8 flex flex-wrap items-center justify-between gap-4"
                  >
                    <h2 class="flex items-center gap-x-4 text-lg text-text/90">
                      <span class="h-2 w-2 rounded-full bg-primary"></span>
                      سفارشات
                    </h2>
                  </div>
                  <!-- Filter  Tabs -->
                  <div class="mb-8">
                    <ul
                      class="-mb-px flex justify-between gap-x-2 overflow-x-auto text-center text-sm font-medium scrollbar-thumb-transparent xs:justify-start xs:gap-x-4 xs:text-base"
                      id="ordersFilterTab"
                      role="tablist"
                    >
                      <li role="presentation">
                        <a
                          href="?{% if querystring and request.GET.status %}{{ querystring }}&{% else %}{% if querystring %}{{ querystring }}{% endif %}{% endif %}{% if request.GET.status %}&{% endif %}{% if request.GET.status %}status={% endif %}"
                          class="filter-tab-btn flex items-center gap-x-2 whitespace-nowrap rounded-t-lg border-b-2 {% if not request.GET.status %}border-primary text-primary{% else %}border-transparent text-text/90 hover:text-text/90{% endif %} px-2 pb-2 dark:hover:text-zinc-300"
                          id="filter-current-tab"
                          role="tab"
                        >
                          همه
                          <span
                            class="flex h-7 w-7 items-center justify-center rounded-lg bg-primary text-base text-white dark:bg-emerald-600"
                          >
                          {{ status_counts.total_count }}
                          </span>
                        </a>
                      </li>
                      <li role="presentation">
                        <a
                          href="?{% if querystring %}{{ querystring }}&{% endif %}status=DELIVERED"
                          class="filter-tab-btn flex items-center gap-x-2 whitespace-nowrap rounded-t-lg border-b-2 {% if request.GET.status == 'DELIVERED' %}border-primary text-primary{% else %}border-transparent text-text/90 hover:text-text/90{% endif %} px-2 pb-2 dark:hover:text-zinc-300"
                          id="filter-delivered-tab"
                          role="tab"
                        >
                          تحویل شده
                          <span
                            class="flex h-7 w-7 items-center justify-center rounded-lg bg-primary text-base text-white dark:bg-emerald-600"
                          >
                          {{ status_counts.delivered_count }}
                          </span>
                        </a>
                      </li>
                      <li role="presentation">
                        <a
                          href="?{% if querystring %}{{ querystring }}&{% endif %}status=FAILED"
                          class="filter-tab-btn flex items-center gap-x-2 whitespace-nowrap rounded-t-lg border-b-2 {% if request.GET.status == 'FAILED' %}border-primary text-primary{% else %}border-transparent text-text/90 hover:text-text/90{% endif %} px-2 pb-2 dark:hover:text-zinc-300"
                          id="filter-canceled-tab"
                          role="tab"
                        >
                          لغو شده
                          <span
                            class="flex h-7 w-7 items-center justify-center rounded-lg bg-primary text-base text-white dark:bg-emerald-600"
                          >
                          {{ status_counts.failed_count }}
                          </span>
                        </a>
                      </li>
                      <li role="presentation">
                        <a
                          href="?{% if querystring %}{{ querystring }}&{% endif %}status=RETURNED"
                          class="filter-tab-btn flex items-center gap-x-2 whitespace-nowrap rounded-t-lg border-b-2 {% if request.GET.status == 'RETURNED' %}border-primary text-primary{% else %}border-transparent text-text/90 hover:text-text/90{% endif %} px-2 pb-2 dark:hover:text-zinc-300"
                          id="filter-returned-tab"
                          role="tab"
                        >
                          مرجوع شده
                          <span
                            class="flex h-7 w-7 items-center justify-center rounded-lg bg-primary text-base text-white dark:bg-emerald-600"
                          >
                          {{ status_counts.returned_count }}
                          </span>
                        </a>
                      </li>
                      <li role="presentation">
                        <a
                          href="?{% if querystring %}{{ querystring }}&{% endif %}status=SUCCESS"
                          class="filter-tab-btn flex items-center gap-x-2 whitespace-nowrap rounded-t-lg border-b-2 {% if request.GET.status == 'SUCCESS' %}border-primary text-primary{% else %}border-transparent text-text/90 hover:text-text/90{% endif %} px-2 pb-2 dark:hover:text-zinc-300"
                          id="filter-success-tab"
                          role="tab"
                        >
                          موفقیت آمیز
                          <span
                            class="flex h-7 w-7 items-center justify-center rounded-lg bg-primary text-base text-white dark:bg-emerald-600"
                          >
                          {{ status_counts.success_count }}
                          </span>
                        </a>
                      </li>
                    </ul>
                  </div>
                  <div id="ordersFilterTab">
                    <div
                      class="{% if request.GET.status %}hidden{% endif %}"
                      id="filter-current"
                      role="tabpanel"
                      aria-labelledby="filter-current-tab"
                    >
                      <div class="mb-8 space-y-4">
                        {% for order in orders %}
                        <div class="rounded-lg border shadow-base">
                          {% with status=order.get_status.title %}
                            <div class="p-4">
                              <!-- head -->
                            {% if status == "PENDING" %}
                            <div class="flex items-center justify-between pb-6">
                              <div class="flex items-center gap-x-2 text-yellow-500 dark:text-yellow-400">
                                <svg class="h-6 w-6">
                                  <use xlink:href="#warning" />
                                </svg>
                                <p class="font-medium md:text-lg">
                                  در انتظار پرداخت
                                </p>
                              </div>
                              <svg class="h-6 w-6">
                                <use xlink:href="#chevron-left" />
                              </svg>
                            </div>
                            {% elif status == "SUCCESS" %}
                            <div class="flex items-center justify-between pb-6">
                              <div class="flex items-center gap-x-2 text-primary">
                                <svg class="h-6 w-6">
                                  <use xlink:href="#outline-check" />
                                </svg>
                                <p class="font-medium md:text-lg">پرداخت شده</p>
                              </div>
                              <svg class="h-6 w-6">
                                <use xlink:href="#chevron-left" />
                              </svg>
                            </div>
                            {% elif status == "FAILED" %}
                            <div class="flex items-center justify-between pb-6">
                              <div class="flex items-center gap-x-2 text-red-500 dark:text-red-400">
                                <svg class="h-6 w-6">
                                  <use xlink:href="#cancel" />
                                </svg>
                                <p class="font-medium md:text-lg">
                                  سفارش لغو شده
                                </p>
                              </div>
                              <svg class="h-6 w-6">
                                <use xlink:href="#chevron-left" />
                              </svg>
                            </div>
                            {% endif %}
                              <!-- content -->
                              <div
                                class="flex flex-col gap-6 pb-6 xl:flex-row xl:justify-between xl:gap-16"
                              >
                                <div class="flex flex-col gap-4 md:flex-row">
                                  <div
                                    class="flex items-center justify-between gap-x-2 md:justify-start"
                                  >
                                    <div
                                      class="text-sm text-text/60 md:text-base"
                                    >
                                      شماره سفارش
                                    </div>
                                    <div
                                      class="text-sm text-text/90 md:text-base"
                                    >
                                      #{{ order.id }}
                                    </div>
                                  </div>
                                  <div
                                    class="flex items-center justify-between gap-x-2 md:justify-start"
                                  >
                                    <div
                                      class="text-sm text-text/60 md:text-base"
                                    >
                                      مبلغ کل
                                    </div>
                                    <div class="text-primary">
                                      <span class="font-bold md:text-lg"
                                        >{{ order.get_amount|format_price }}</span
                                      >
                                      <span class="text-sm md:text-base"
                                        >تومان</span
                                      >
                                    </div>
                                  </div>
                                  <div
                                    class="flex items-center justify-between gap-x-2 md:justify-start"
                                  >
                                    <div
                                      class="text-sm text-text/60 md:text-base"
                                    >
                                      تاریخ
                                    </div>
                                    <div
                                      class="text-sm text-text/90 md:text-base"
                                    >
                                    {{ order.created_date|jalali_date }}
                                    </div>
                                  </div>
                                </div>
                                {% with fulfillment_status=order.get_fulfillment_status %}
                                  {% if fulfillment_status %}
                                      {% if fulfillment_status.title == "PENDING_APPROVAL" %}
                                          <div class="flex grow flex-col gap-y-4">
                                              <!-- order status -->
                                              <div class="flex items-center gap-x-2 text-yellow-500 dark:text-yellow-400">
                                                  <svg class="h-5 w-5 md:h-6 md:w-6">
                                                      <use xlink:href="#order-pending" />
                                                  </svg>
                                                  <p class="text-sm font-medium md:text-base">در انتظار تایید</p>
                                              </div>
                                              <!-- order step -->
                                              <div class="relative h-2 w-full rounded-full bg-background dark:bg-zinc-800">
                                                  <span class="absolute inset-y-0 right-0 rounded-full bg-yellow-500 dark:bg-yellow-400" style="width: 25%"></span>
                                              </div>
                                              <!-- order date -->
                                              <div class="flex items-center justify-between text-sm text-yellow-500 dark:text-yellow-400 md:text-base">
                                                  <span> {{ order.updated_date|jalali_date }}</span>
                                                  <span> ساعت {{ order.updated_date|format_time }} </span>
                                              </div>
                                          </div>
                                      {% elif fulfillment_status.title == "PROCESSING" %}
                                          <div class="flex grow flex-col gap-y-4">
                                              <!-- order status -->
                                              <div class="flex items-center gap-x-2 text-sky-500 dark:text-sky-400">
                                                  <svg class="h-5 w-5 md:h-6 md:w-6">
                                                      <use xlink:href="#order-process" />
                                                  </svg>
                                                  <p class="text-sm font-medium md:text-base">در حال پردازش</p>
                                              </div>
                                              <!-- order step -->
                                              <div class="relative h-2 w-full rounded-full bg-background dark:bg-zinc-800">
                                                  <span class="absolute inset-y-0 right-0 rounded-full bg-sky-500 dark:bg-sky-400" style="width: 50%"></span>
                                              </div>
                                              <!-- order date -->
                                              <div class="flex items-center justify-between text-sm text-sky-500 dark:text-sky-400 md:text-base">
                                                  <span> {{ order.updated_date|jalali_date }} </span>
                                                  <span> ساعت {{ order.updated_date|format_time }} </span>
                                              </div>
                                          </div>
                                      {% elif fulfillment_status.title == "SHIPPED" %}
                                          <div class="flex grow flex-col gap-y-4">
                                              <!-- order status -->
                                              <div class="flex items-center gap-x-2 text-teal-500 dark:text-teal-400">
                                                  <svg class="h-5 w-5 md:h-6 md:w-6">
                                                      <use xlink:href="#order-sent" />
                                                  </svg>
                                                  <p class="text-sm font-medium md:text-base">ارسال شده</p>
                                              </div>
                                              <!-- order step -->
                                              <div class="relative h-2 w-full rounded-full bg-background dark:bg-zinc-800">
                                                  <span class="absolute inset-y-0 right-0 rounded-full bg-teal-500 dark:bg-teal-400" style="width: 75%"></span>
                                              </div>
                                              <!-- order date -->
                                              <div class="flex items-center justify-between text-sm text-teal-500 dark:text-teal-400 md:text-base">
                                                  <span> {{ order.updated_date|jalali_date }} </span>
                                                  <span> ساعت {{ order.updated_date|format_time }} </span>
                                              </div>
                                          </div>
                                      {% elif fulfillment_status.title == "DELIVERED" %}
                                          <div class="flex grow flex-col gap-y-4">
                                              <!-- order status -->
                                              <div class="flex items-center gap-x-2 text-primary">
                                                  <p class="text-sm font-medium md:text-base">تحویل داده شده</p>
                                              </div>
                                              <!-- order step -->
                                              <div class="relative h-2 w-full rounded-full bg-background dark:bg-zinc-800">
                                                  <span class="absolute inset-y-0 right-0 rounded-full bg-primary" style="width: 100%"></span>
                                              </div>
                                              <!-- order date -->
                                              <div class="flex items-center justify-between text-sm text-primary md:text-base">
                                                  <span> {{ order.updated_date|jalali_date }} </span>
                                                  <span> ساعت {{ order.updated_date|format_time }} </span>
                                              </div>
                                          </div>
                                      {% elif fulfillment_status.title == "RETURNED" %}
                                          <div class="flex grow flex-col gap-y-4">
                                              <!-- order status -->
                                              <div class="flex items-center gap-x-2 text-text/60">
                                                  <svg class="h-5 w-5 md:h-6 md:w-6">
                                                      <use xlink:href="#order-returned" />
                                                  </svg>
                                                  <p class="text-sm font-medium md:text-base">مرجوع شده</p>
                                              </div>
                                              <!-- order step -->
                                              <div class="relative h-2 w-full rounded-full bg-background dark:bg-zinc-800">
                                                  <span class="absolute inset-y-0 right-0 rounded-full bg-zinc-500 dark:bg-zinc-400" style="width: 100%"></span>
                                              </div>
                                              <!-- order date -->
                                              <div class="flex items-center justify-between text-sm text-text/60 md:text-base">
                                                  <span> {{ order.updated_date|jalali_date }} </span>
                                                  <span> ساعت {{ order.updated_date|format_time }} </span>
                                              </div>
                                          </div>
                                      {% endif %}
                                  {% else %}
                                  {% endif %}
                              {% endwith %}
                              </div>
                            </div>
                          {% endwith %}
                          <!-- products slider -->
                          <div class="swiper orders-product-swiper p-4">
                            <div class="swiper-wrapper">
                              {% for order_item in order.order_items.all %}
                              <div class="swiper-slide">
                                <a
                                  class="flex items-center gap-x-2 rounded-lg border p-2"
                                  href="{% url "shop:product-detail" slug=order_item.product_variant.product.slug %}"
                                >
                                  <img
                                    alt=""
                                    class="w-20"
                                    src="{{ order_item.product_variant.product.image.url }}"
                                  />
                                  <p class="line-clamp-2 text-sm">
                                    {{ order_item.product_variant.product.name }}
                                  </p>
                                </a>
                              </div>
                              {% endfor %}
                            </div>
                          </div>
                        </div>
                        {% endfor %}
                        <!-- order item -->
                      </div>
                      <!-- Pagination -->
                      <div class="flex items-center justify-center gap-x-4 md:justify-end">
                        {% if page_obj.has_previous %}
                          <a
                            class="pagination-button flex items-center justify-center"
                            href="?{% if querystring %}{{ querystring }}&{% endif %}page={{ page_obj.previous_page_number }}"
                          >
                            <svg class="h-6 w-6"><use xlink:href="#chevron-right"></use></svg>
                          </a>
                        {% endif %}
                        <div class="flex items-center gap-x-2">
                          {% for item in page_items %}
                            {% if item.ellipsis %}
                              <p class="text-sm text-text/60">...</p>
                            {% else %}
                              {% if item.number == page_obj.number %}
                                <a class="pagination-button pagination-button-active" href="?{% if querystring %}{{ querystring }}&{% endif %}page={{ item.number }}">
                                  {{ item.number }}
                                </a>
                              {% else %}
                                <a class="pagination-button" href="?{% if querystring %}{{ querystring }}&{% endif %}page={{ item.number }}">
                                  {{ item.number }}
                                </a>
                              {% endif %}
                            {% endif %}
                          {% endfor %}
                        </div>
                        {% if page_obj.has_next %}
                          <a
                            class="flex h-8 w-8 items-center justify-center rounded-full bg-muted transition-all duration-200 hover:bg-primary hover:text-white hover:dark:bg-emerald-600"
                            href="?{% if querystring %}{{ querystring }}&{% endif %}page={{ page_obj.next_page_number }}"
                          >
                            <svg class="h-6 w-6"><use xlink:href="#chevron-left"></use></svg>
                          </a>
                        {% endif %}
                      </div>
                    </div>
                    <div
                      class="{% if request.GET.status != 'DELIVERED' %}hidden{% endif %}"
                      id="filter-delivered"
                      role="tabpanel"
                      aria-labelledby="filter-delivered-tab"
                    >
                      <div class="mb-8 space-y-4">
                         {% for order in orders %}
                           <!-- order item -->
                           <div class="rounded-lg border shadow-base">
                             {% with status=order.get_status.title %}
                                 <div class="p-4">
                                   <div class="flex items-center justify-between pb-6">
                                     <div class="flex items-center gap-x-2 text-primary">
                                       <p class="font-medium md:text-lg">تحویل داده شده</p>
                                     </div>
                                     <svg class="h-6 w-6">
                                       <use xlink:href="#chevron-left" />
                                     </svg>
                                   </div>
                                   <div class="flex flex-col gap-6 pb-6 xl:flex-row xl:justify-between xl:gap-16">
                                     <div class="flex flex-col gap-4 md:flex-row">
                                       <div class="flex items-center justify-between gap-x-2 md:justify-start">
                                         <div class="text-sm text-text/60 md:text-base">شماره سفارش</div>
                                         <div class="text-sm text-text/90 md:text-base">#{{ order.id }}</div>
                                       </div>
                                       <div class="flex items-center justify-between gap-x-2 md:justify-start">
                                         <div class="text-sm text-text/60 md:text-base">مبلغ کل</div>
                                         <div class="text-primary">
                                           <span class="font-bold md:text-lg">{{ order.get_amount|format_price }}</span>
                                           <span class="text-sm md:text-base">تومان</span>
                                         </div>
                                       </div>
                                       <div class="flex items-center justify-between gap-x-2 md:justify-start">
                                         <div class="text-sm text-text/60 md:text-base">تاریخ</div>
                                         <div class="text-sm text-text/90 md:text-base">{{ order.created_date|jalali_date }}</div>
                                       </div>
                                     </div>
                                     <div class="flex grow flex-col gap-y-4">
                                       <div class="flex items-center gap-x-2 text-primary">
                                         <p class="text-sm font-medium md:text-base">تحویل داده شده</p>
                                       </div>
                                       <div class="relative h-2 w-full rounded-full bg-background dark:bg-zinc-800">
                                         <span class="absolute inset-y-0 right-0 rounded-full bg-primary" style="width: 100%"></span>
                                       </div>
                                       <div class="flex items-center justify-between text-sm text-primary md:text-base">
                                         <span>{{ order.updated_date|jalali_date }}</span>
                                         <span>ساعت {{ order.updated_date|format_time }}</span>
                                       </div>
                                     </div>
                                   </div>
                                 </div>
                               {% endwith %}
                               <div class="swiper orders-product-swiper p-4">
                                 <div class="swiper-wrapper">
                                   {% for order_item in order.order_items.all %}
                                   <div class="swiper-slide">
                                     <a class="flex items-center gap-x-2 rounded-lg border p-2" href="{% url "shop:product-detail" slug=order_item.product_variant.product.slug %}">
                                       <img alt="" class="w-20" src="{{ order_item.product_variant.product.image.url }}" />
                                       <p class="line-clamp-2 text-sm">{{ order_item.product_variant.product.name }}</p>
                                     </a>
                                   </div>
                                   {% endfor %}
                                 </div>
                               </div>
                             </div>
                         {% endfor %}
                      </div>
                    </div>
                    <div
                      class="{% if request.GET.status != 'FAILED' %}hidden{% endif %}"
                      id="filter-canceled"
                      role="tabpanel"
                      aria-labelledby="filter-canceled-tab"
                    >
                      <div class="mb-8 space-y-4">
                         {% for order in orders %}
                           <!-- order item -->
                           <div class="rounded-lg border shadow-base">
                             {% with status=order.get_status.title %}
                                 <div class="p-4">
                                   <div class="flex items-center justify-between pb-6">
                                     <div class="flex items-center gap-x-2 text-red-500 dark:text-red-400">
                                       <svg class="h-6 w-6">
                                         <use xlink:href="#cancel" />
                                       </svg>
                                       <p class="font-medium md:text-lg">سفارش لغو شده</p>
                                     </div>
                                     <svg class="h-6 w-6">
                                       <use xlink:href="#chevron-left" />
                                     </svg>
                                   </div>
                                   <div class="flex flex-col gap-6 pb-6 xl:flex-row xl:justify-between xl:gap-16">
                                     <div class="flex flex-col gap-4 md:flex-row">
                                       <div class="flex items-center justify-between gap-x-2 md:justify-start">
                                         <div class="text-sm text-text/60 md:text-base">شماره سفارش</div>
                                         <div class="text-sm text-text/90 md:text-base">#{{ order.id }}</div>
                                       </div>
                                       <div class="flex items-center justify-between gap-x-2 md:justify-start">
                                         <div class="text-sm text-text/60 md:text-base">مبلغ کل</div>
                                         <div class="text-primary">
                                           <span class="font-bold md:text-lg">{{ order.get_amount|format_price }}</span>
                                           <span class="text-sm md:text-base">تومان</span>
                                         </div>
                                       </div>
                                       <div class="flex items-center justify-between gap-x-2 md:justify-start">
                                         <div class="text-sm text-text/60 md:text-base">تاریخ</div>
                                         <div class="text-sm text-text/90 md:text-base">{{ order.created_date|jalali_date }}</div>
                                       </div>
                                     </div>
                                   </div>
                                 </div>
                               {% endwith %}
                               <div class="swiper orders-product-swiper p-4">
                                 <div class="swiper-wrapper">
                                   {% for order_item in order.order_items.all %}
                                   <div class="swiper-slide">
                                     <a class="flex items-center gap-x-2 rounded-lg border p-2" href="{% url "shop:product-detail" slug=order_item.product_variant.product.slug %}">
                                       <img alt="" class="w-20" src="{{ order_item.product_variant.product.image.url }}" />
                                       <p class="line-clamp-2 text-sm">{{ order_item.product_variant.product.name }}</p>
                                     </a>
                                   </div>
                                   {% endfor %}
                                 </div>
                               </div>
                             </div>
                         {% endfor %}
                      </div>
                    </div>
                    <div
                      class="{% if request.GET.status != 'RETURNED' %}hidden{% endif %}"
                      id="filter-returned"
                      role="tabpanel"
                      aria-labelledby="filter-returned-tab"
                    >
                      <div class="mb-8 space-y-4">
                         {% for order in orders %}
                           <!-- order item -->
                           <div class="rounded-lg border shadow-base">
                             {% with status=order.get_status.title %}
                                 <div class="p-4">
                                   <div class="flex items-center justify-between pb-6">
                                     <div class="flex items-center gap-x-2 text-text/60">
                                       <svg class="h-6 w-6">
                                         <use xlink:href="#order-returned" />
                                       </svg>
                                       <p class="font-medium md:text-lg">مرجوع شده</p>
                                     </div>
                                     <svg class="h-6 w-6">
                                       <use xlink:href="#chevron-left" />
                                     </svg>
                                   </div>
                                   <div class="flex flex-col gap-6 pb-6 xl:flex-row xl:justify-between xl:gap-16">
                                     <div class="flex flex-col gap-4 md:flex-row">
                                       <div class="flex items-center justify-between gap-x-2 md:justify-start">
                                         <div class="text-sm text-text/60 md:text-base">شماره سفارش</div>
                                         <div class="text-sm text-text/90 md:text-base">#{{ order.id }}</div>
                                       </div>
                                       <div class="flex items-center justify-between gap-x-2 md:justify-start">
                                         <div class="text-sm text-text/60 md:text-base">مبلغ کل</div>
                                         <div class="text-primary">
                                           <span class="font-bold md:text-lg">{{ order.get_amount|format_price }}</span>
                                           <span class="text-sm md:text-base">تومان</span>
                                         </div>
                                       </div>
                                       <div class="flex items-center justify-between gap-x-2 md:justify-start">
                                         <div class="text-sm text-text/60 md:text-base">تاریخ</div>
                                         <div class="text-sm text-text/90 md:text-base">{{ order.created_date|jalali_date }}</div>
                                       </div>
                                     </div>
                                     <div class="flex grow flex-col gap-y-4">
                                       <div class="flex items-center gap-x-2 text-text/60">
                                         <svg class="h-5 w-5 md:h-6 md:w-6">
                                           <use xlink:href="#order-returned" />
                                         </svg>
                                         <p class="text-sm font-medium md:text-base">مرجوع شده</p>
                                       </div>
                                       <div class="relative h-2 w-full rounded-full bg-background dark:bg-zinc-800">
                                         <span class="absolute inset-y-0 right-0 rounded-full bg-zinc-500 dark:bg-zinc-400" style="width: 100%"></span>
                                       </div>
                                       <div class="flex items-center justify-between text-sm text-text/60 md:text-base">
                                         <span>{{ order.updated_date|jalali_date }}</span>
                                         <span>ساعت {{ order.updated_date|format_time }}</span>
                                       </div>
                                     </div>
                                   </div>
                                 </div>
                               {% endwith %}
                               <div class="swiper orders-product-swiper p-4">
                                 <div class="swiper-wrapper">
                                   {% for order_item in order.order_items.all %}
                                   <div class="swiper-slide">
                                     <a class="flex items-center gap-x-2 rounded-lg border p-2" href="{% url "shop:product-detail" slug=order_item.product_variant.product.slug %}">
                                       <img alt="" class="w-20" src="{{ order_item.product_variant.product.image.url }}" />
                                       <p class="line-clamp-2 text-sm">{{ order_item.product_variant.product.name }}</p>
                                     </a>
                                   </div>
                                   {% endfor %}
                                 </div>
                               </div>
                             </div>
                         {% endfor %}
                      </div>
                    </div>
                    <div
                      class="{% if request.GET.status != 'SUCCESS' %}hidden{% endif %}"
                      id="filter-success"
                      role="tabpanel"
                      aria-labelledby="filter-success-tab"
                    >
                      <div class="mb-8 space-y-4">
                         {% for order in orders %}
                           <!-- order item -->
                           <div class="rounded-lg border shadow-base">
                             {% with status=order.get_status.title %}
                                 <div class="p-4">
                                   <div class="flex items-center justify-between pb-6">
                                     <div class="flex items-center gap-x-2 text-primary">
                                       <svg class="h-6 w-6">
                                         <use xlink:href="#outline-check" />
                                       </svg>
                                       <p class="font-medium md:text-lg">پرداخت شده</p>
                                     </div>
                                     <svg class="h-6 w-6">
                                       <use xlink:href="#chevron-left" />
                                     </svg>
                                   </div>
                                   <div class="flex flex-col gap-6 pb-6 xl:flex-row xl:justify-between xl:gap-16">
                                     <div class="flex flex-col gap-4 md:flex-row">
                                       <div class="flex items-center justify-between gap-x-2 md:justify-start">
                                         <div class="text-sm text-text/60 md:text-base">شماره سفارش</div>
                                         <div class="text-sm text-text/90 md:text-base">#{{ order.id }}</div>
                                       </div>
                                       <div class="flex items-center justify-between gap-x-2 md:justify-start">
                                         <div class="text-sm text-text/60 md:text-base">مبلغ کل</div>
                                         <div class="text-primary">
                                           <span class="font-bold md:text-lg">{{ order.get_amount|format_price }}</span>
                                           <span class="text-sm md:text-base">تومان</span>
                                         </div>
                                       </div>
                                       <div class="flex items-center justify-between gap-x-2 md:justify-start">
                                         <div class="text-sm text-text/60 md:text-base">تاریخ</div>
                                         <div class="text-sm text-text/90 md:text-base">{{ order.created_date|jalali_date }}</div>
                                       </div>
                                     </div>
                                   </div>
                                 </div>
                               {% endwith %}
                               <div class="swiper orders-product-swiper p-4">
                                 <div class="swiper-wrapper">
                                   {% for order_item in order.order_items.all %}
                                   <div class="swiper-slide">
                                     <a class="flex items-center gap-x-2 rounded-lg border p-2" href="{% url "shop:product-detail" slug=order_item.product_variant.product.slug %}">
                                       <img alt="" class="w-20" src="{{ order_item.product_variant.product.image.url }}" />
                                       <p class="line-clamp-2 text-sm">{{ order_item.product_variant.product.name }}</p>
                                     </a>
                                   </div>
                                   {% endfor %}
                                 </div>
                               </div>
                             </div>
                         {% endfor %}
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </main>

    </div>
{% endblock dashboard_content %}

