from django.core.management.base import BaseCommand
from django.db import transaction
from shop.models import (
    ProductCategoryModel,
    CategoryFeatureModel,
    FeatureOptionModel,
)


class Command(BaseCommand):
    help = "Define logical features and options for all shop categories"

    def add_arguments(self, parser):
        parser.add_argument(
            "--force",
            action="store_true",
            help="Delete and recreate existing features",
        )

    def get_category_features(self, category_name):
        features_mapping = {
            # الکترونیک - موبایل و تبلت
            "گوشی هوشمند": [
                "رنگ",
                "حافظه داخلی",
                "RAM",
                "اندازه صفحه نمایش",
                "دوربین اصلی",
                "دوربین سلفی",
                "باتری",
            ],
            "گوشی ساده": ["رنگ", "حافظه داخلی", "باتری", "اندازه صفحه نمایش"],
            "تبلت": [
                "رنگ",
                "حافظه داخلی",
                "RAM",
                "اندازه صفحه نمایش",
                "دوربین",
                "باتری",
            ],
            "شارژر": ["رنگ", "طول کابل", "وات", "نوع اتصال", "تعداد پورت"],
            "کابل اتصال": ["رنگ", "طول", "نوع اتصال", "نسخه USB"],
            "کیف و کاور": ["رنگ", "جنس", "سایز", "مدل گوشی"],
            "هندزفری بی‌سیم": [
                "رنگ",
                "باتری",
                "نوع اتصال",
                "میکروفون",
                "قابلیت نویزکنسلی",
            ],
            "پاوربانک": [
                "رنگ",
                "ظرفیت",
                "تعداد پورت",
                "وات خروجی",
                "نوع باتری",
            ],
            # الکترونیک - کامپیوتر و لپ‌تاپ
            "لپ‌تاپ": [
                "رنگ",
                "حافظه رم",
                "حافظه داخلی",
                "اندازه صفحه نمایش",
                "پردازنده",
                "کارت گرافیک",
                "سیستم عامل",
            ],
            "کامپیوتر دسکتاپ": [
                "رنگ",
                "حافظه رم",
                "حافظه داخلی",
                "پردازنده",
                "کارت گرافیک",
                "منبع تغذیه",
            ],
            "مانیتور": [
                "رنگ",
                "اندازه صفحه نمایش",
                "رزولوشن",
                "نرخ تازه سازی",
                "نوع پنل",
                "پورت‌ها",
            ],
            "کیبورد و ماوس": [
                "رنگ",
                "نوع اتصال",
                "سایز",
                "مکانیکی/غیرمکانیکی",
                "RGB",
            ],
            "کابل HDMI": ["رنگ", "طول", "نسخه HDMI", "پوشش", "نوع کانکتور"],
            "کارت گرافیک": ["رنگ", "حافظه", "سرعت", "نوع خنک کننده", "پورت‌ها"],
            "رم کامپیوتر": ["رنگ", "ظرفیت", "سرعت", "تعداد ماژول", "تایمینگ"],
            # الکترونیک - صوتی و تصویری
            "تلویزیون": [
                "رنگ",
                "اندازه صفحه نمایش",
                "رزولوشن",
                "نوع پنل",
                "سیستم عامل",
                "پورت‌ها",
            ],
            "سینمای خانگی": [
                "رنگ",
                "قدرت",
                "تعداد بلندگو",
                "پورت‌ها",
                "قابلیت‌ها",
            ],
            "پخش‌کننده DVD": ["رنگ", "فرمت‌های پشتیبانی", "پورت‌ها", "رزولوشن"],
            "پروژکتور": [
                "رنگ",
                "رزولوشن",
                "شدت روشنایی",
                "کنتراست",
                "فاصله پرتاب",
            ],
            "اسپیکر": ["رنگ", "قدرت", "باتری", "نوع اتصال", "قابلیت ضد آب"],
            "هدفون بی‌سیم": [
                "رنگ",
                "باتری",
                "نوع اتصال",
                "میکروفون",
                "نویزکنسل",
            ],
            "هدفون سیمی": [
                "رنگ",
                "طول کابل",
                "نوع اتصال",
                "امپدانس",
                "میکروفون",
            ],
            # الکترونیک - لوازم جانبی
            "کابل شارژ": ["رنگ", "طول", "نوع اتصال", "جنس", "وات"],
            "شارژر دیواری": [
                "رنگ",
                "وات",
                "تعداد پورت",
                "نوع اتصال",
                "قابلیت فست شارژ",
            ],
            "شارژر فندکی": ["رنگ", "وات", "تعداد پورت", "ولتاژ خروجی"],
            "هندزفری سیمی": [
                "رنگ",
                "طول کابل",
                "نوع اتصال",
                "میکروفون",
                "امپدانس",
            ],
            "کیف دوربین": ["رنگ", "جنس", "ابعاد", "تعداد بخش", "قابلیت ضد آب"],
            "کارت حافظه": ["رنگ", "ظرفیت", "سرعت", "کلاس", "فرمت"],
            # مد و پوشاک - مردانه
            "پیراهن": ["رنگ", "سایز", "جنس", "طرح", "آستین"],
            "تی‌شرت": ["رنگ", "سایز", "جنس", "طرح", "یقه"],
            "شلوار": ["رنگ", "سایز", "جنس", "طرح", "قد"],
            "کفش": ["رنگ", "سایز", "جنس", "نوع کفش", "کاربرد"],
            "کمربند": ["رنگ", "سایز", "جنس", "ب buckle", "عرض"],
            "ساعت مچی": ["رنگ", "سایز", "جنس", "نوع حرکت", "قابلیت‌ها"],
            # مد و پوشاک - زنانه
            "مانتو": ["رنگ", "سایز", "جنس", "طرح", "قد"],
            "لباس مجلسی": ["رنگ", "سایز", "جنس", "طرح", "قد"],
            "شلوار": ["رنگ", "سایز", "جنس", "طرح", "قد"],
            "کفش": ["رنگ", "سایز", "جنس", "پاشنه", "نوع کفش"],
            "کیف دستی": ["رنگ", "ابعاد", "جنس", "دسته", "قفل"],
            "روسری": ["رنگ", "ابعاد", "جنس", "طرح", "ضخامت"],
            # مد و پوشاک - بچه‌گانه
            "پیراهن": ["رنگ", "سایز", "جنس", "طرح", "رده سنی"],
            "شلوار": ["رنگ", "سایز", "جنس", "طرح", "رده سنی"],
            "سویشرت": ["رنگ", "سایز", "جنس", "طرح", "رده سنی"],
            "کفش": ["رنگ", "سایز", "جنس", "نوع کفش", "رده سنی"],
            "ست بادی نوزادی": ["رنگ", "سایز", "جنس", "طرح", "رده سنی"],
            "هدبند": ["رنگ", "سایز", "جنس", "طرح", "رده سنی"],
            # مد و پوشاک - اکسسوری
            "گردنبند": ["رنگ", "طول", "جنس", "نوع سنگ", "طرح"],
            "دستبند": ["رنگ", "سایز", "جنس", "نوع سنگ", "طرح"],
            "عینک آفتابی": ["رنگ", "ابعاد", "جنس", "UV protection", "طرح"],
            "کلاه": ["رنگ", "سایز", "جنس", "نوع کلاه", "طرح"],
            "کمربند": ["رنگ", "سایز", "جنس", "ب buckle", "عرض"],
            "شال": ["رنگ", "ابعاد", "جنس", "طرح", "ضخامت"],
            # خانه و آشپزخانه - لوازم آشپزخانه
            "یخچال": ["رنگ", "ظرفیت", "ابعاد", "نوع", "برند"],
            "ظرفشویی": ["رنگ", "ظرفیت", "ابعاد", "نوع", "تعداد برنامه"],
            "مایکروویو": ["رنگ", "ظرفیت", "ابعاد", "قدرت", "برند"],
            "جاروبرقی": ["رنگ", "قدرت", "ظرفیت", "نوع", "برند"],
            "کتری برقی": ["رنگ", "ظرفیت", "قدرت", "جنس", "برند"],
            "قهوه‌ساز": ["رنگ", "ظرفیت", "نوع", "قابلیت‌ها", "برند"],
            # خانه و آشپزخانه - دکوراسیون
            "تابلو": ["رنگ", "ابعاد", "جنس", "سبک", "موضوع"],
            "قاب عکس": ["رنگ", "ابعاد", "جنس", "سبک", "ظرفیت"],
            "گلدان": ["رنگ", "ابعاد", "جنس", "سبک", "کاربرد"],
            "فرش": ["رنگ", "ابعاد", "جنس", "طرح", "تراکم"],
            "پرده": ["رنگ", "ابعاد", "جنس", "سبک", "ضخامت"],
            "کنسول و بوفه": ["رنگ", "ابعاد", "جنس", "سبک", "تعداد کشو"],
            # خانه و آشپزخانه - خواب و حمام
            "ست حوله": ["رنگ", "سایز", "جنس", "تعداد تکه", "جنس پارچه"],
            "ملحفه": ["رنگ", "سایز", "جنس", "تعداد تکه", "جنس پارچه"],
            "بالش": ["رنگ", "سایز", "جنس", "نوع پر", "ضخامت"],
            "پتو": ["رنگ", "ابعاد", "جنس", "ضخامت", "وزن"],
            "سرویس خواب کودک": ["رنگ", "سایز", "جنس", "تعداد تکه", "رده سنی"],
            # خانه و آشپزخانه - سرو و پذیرایی
            "سرویس غذاخوری": ["رنگ", "تعداد تکه", "جنس", "طرح", "برند"],
            "چای‌خوری": ["رنگ", "تعداد تکه", "جنس", "طرح", "برند"],
            "قهوه‌خوری": ["رنگ", "تعداد تکه", "جنس", "طرح", "برند"],
            "لیوان": ["رنگ", "ظرفیت", "جنس", "طرح", "برند"],
            "بطری": ["رنگ", "ظرفیت", "جنس", "طرح", "برند"],
            "سینی": ["رنگ", "ابعاد", "جنس", "طرح", "برند"],
            # زیبایی و سلامت - مراقبت پوست
            "کرم مرطوب‌کننده": ["رنگ", "ظرفیت", "نوع پوست", "برند", "SPF"],
            "ضدآفتاب": ["رنگ", "ظرفیت", "SPF", "برند", "نوع پوست"],
            "ماسک صورت": ["رنگ", "ظرفیت", "نوع پوست", "برند", "کاربرد"],
            "سرم": ["رنگ", "ظرفیت", "نوع پوست", "برند", "کاربرد"],
            "پاک‌کننده": ["رنگ", "ظرفیت", "نوع پوست", "برند", "نوع"],
            "تونر": ["رنگ", "ظرفیت", "نوع پوست", "برند", "کاربرد"],
            # زیبایی و سلامت - مراقبت مو
            "شامپو": ["رنگ", "ظرفیت", "نوع مو", "برند", "کاربرد"],
            "نرم‌کننده": ["رنگ", "ظرفیت", "نوع مو", "برند", "کاربرد"],
            "ماسک مو": ["رنگ", "ظرفیت", "نوع مو", "برند", "کاربرد"],
            "روغن مو": ["رنگ", "ظرفیت", "نوع مو", "برند", "کاربرد"],
            "تونیک پوست سر": ["رنگ", "ظرفیت", "نوع مو", "برند", "کاربرد"],
            "سرم مو": ["رنگ", "ظرفیت", "نوع مو", "برند", "کاربرد"],
            # زیبایی و سلامت - آرایشی
            "کرم پودر": ["رنگ", "ظرفیت", "نوع پوست", "برند", "پوشش"],
            "رژلب": ["رنگ", "ظرفیت", "نوع", "برند", "مقاومت"],
            "ریمل": ["رنگ", "ظرفیت", "نوع", "برند", "مقاومت"],
            "سایه چشم": ["رنگ", "ظرفیت", "نوع", "برند", "تعداد رنگ"],
            "خط چشم": ["رنگ", "ظرفیت", "نوع", "برند", "مقاومت"],
            "لاک ناخن": ["رنگ", "ظرفیت", "نوع", "برند", "مقاومت"],
            # زیبایی و سلامت - بهداشتی
            "مسواک": ["رنگ", "نوع", "برند", "سختی مو", "قابلیت‌ها"],
            "خمیر دندان": ["رنگ", "ظرفیت", "نوع", "برند", "کاربرد"],
            "صابون": ["رنگ", "وزن", "نوع", "برند", "کاربرد"],
            "شامپو بچه": ["رنگ", "ظرفیت", "برند", "رده سنی", "کاربرد"],
            "دستمال مرطوب": ["رنگ", "تعداد", "برند", "کاربرد", "مواد"],
            "ضدعفونی‌کننده": ["رنگ", "ظرفیت", "برند", "نوع", "الکل"],
            # ورزش و سفر - لوازم ورزشی
            "دمبل": ["رنگ", "وزن", "جنس", "نوع", "برند"],
            "مت ورزشی": ["رنگ", "ابعاد", "جنس", "ضخامت", "برند"],
            "تردمیل": ["رنگ", "قدرت", "ابعاد", "سرعت", "برند"],
            "دوچرخه ثابت": ["رنگ", "قدرت", "ابعاد", "برنامه", "برند"],
            "کفش ورزشی": ["رنگ", "سایز", "جنس", "نوع ورزش", "برند"],
            "طناب پرش": ["رنگ", "طول", "جنس", "نوع دسته", "برند"],
            # ورزش و سفر - پوشاک ورزشی
            "تی‌شرت ورزشی": ["رنگ", "سایز", "جنس", "نوع ورزش", "برند"],
            "شلوارک": ["رنگ", "سایز", "جنس", "نوع ورزش", "برند"],
            "دمپایی": ["رنگ", "سایز", "جنس", "نوع", "برند"],
            "سویشرت": ["رنگ", "سایز", "جنس", "نوع ورزش", "برند"],
            "کوله‌پشتی": ["رنگ", "ظرفیت", "جنس", "تعداد بخش", "برند"],
            # ورزش و سفر - سفر و کمپینگ
            "چادر": ["رنگ", "ابعاد", "جنس", "ظرفیت", "برند"],
            "کیسه خواب": ["رنگ", "ابعاد", "جنس", "دمای مناسب", "برند"],
            "چراغ قوه": ["رنگ", "قدرت", "نوع باتری", "نور", "برند"],
            "زیرانداز": ["رنگ", "ابعاد", "جنس", "ضخامت", "برند"],
            "کوله‌پشتی سفر": ["رنگ", "ظرفیت", "جنس", "تعداد بخش", "برند"],
            "اجاق کوهنوردی": ["رنگ", "قدرت", "سوخت", "ابعاد", "برند"],
            # ورزش و سفر - ساعت و تناسب اندام
            "ساعت هوشمند": ["رنگ", "ابعاد", "جنس", "باتری", "برند"],
            "دستبند سلامتی": ["رنگ", "سایز", "جنس", "باتری", "برند"],
            "ترازو": ["رنگ", "ظرفیت", "جنس", "دقت", "برند"],
            "پوشیدنی تناسب اندام": ["رنگ", "سایز", "جنس", "باتری", "برند"],
            "هدفون ورزشی": ["رنگ", "نوع اتصال", "جنس", "باتری", "برند"],
            # کودک و نوزاد - اسباب‌بازی
            "عروسک": ["رنگ", "ابعاد", "جنس", "رده سنی", "برند"],
            "پازل": ["رنگ", "تعداد تکه", "جنس", "رده سنی", "برند"],
            "ماشین اسباب‌بازی": ["رنگ", "ابعاد", "جنس", "رده سنی", "برند"],
            "بازی فکری": ["رنگ", "تعداد بازیکن", "جنس", "رده سنی", "برند"],
            "بلوک ساختنی": ["رنگ", "تعداد تکه", "جنس", "رده سنی", "برند"],
            "قطار چوبی": ["رنگ", "ابعاد", "جنس", "رده سنی", "برند"],
            # کودک و نوزاد - وسایل آموزشی
            "کتاب آموزشی": ["رنگ", "تعداد صفحه", "جنس", "رده سنی", "ناشر"],
            "لگو": ["رنگ", "تعداد تکه", "جنس", "رده سنی", "برند"],
            "دوچرخه بچه‌گانه": ["رنگ", "سایز", "جنس", "رده سنی", "برند"],
            "ساعت آموزشی": ["رنگ", "ابعاد", "جنس", "رده سنی", "برند"],
            "فلش کارت": ["رنگ", "تعداد کارت", "جنس", "رده سنی", "برند"],
            "پازل آموزشی": ["رنگ", "تعداد تکه", "جنس", "رده سنی", "برند"],
            # کودک و نوزاد - لباس کودک
            "ست بادی": ["رنگ", "سایز", "جنس", "رده سنی", "برند"],
            "شلوار": ["رنگ", "سایز", "جنس", "رده سنی", "برند"],
            "پیراهن": ["رنگ", "سایز", "جنس", "رده سنی", "برند"],
            "کلاه": ["رنگ", "سایز", "جنس", "رده سنی", "برند"],
            "جوراب": ["رنگ", "سایز", "جنس", "رده سنی", "برند"],
            "کاپشن": ["رنگ", "سایز", "جنس", "رده سنی", "برند"],
            # کودک و نوزاد - سیسمونی
            "روروک": ["رنگ", "ابعاد", "جنس", "رده سنی", "برند"],
            "کریر": ["رنگ", "ابعاد", "جنس", "رده سنی", "برند"],
            "گهواره": ["رنگ", "ابعاد", "جنس", "رده سنی", "برند"],
            "تشک بازی": ["رنگ", "ابعاد", "جنس", "رده سنی", "برند"],
            "صندلی ماشین": ["رنگ", "ابعاد", "جنس", "رده سنی", "برند"],
            "تخت کنار مادر": ["رنگ", "ابعاد", "جنس", "رده سنی", "برند"],
            # کتاب و فرهنگ - رمان و داستان
            "رمان معاصر": ["رنگ", "تعداد صفحه", "نوع جلد", "ناشر", "نویسنده"],
            "داستان کوتاه": [
                "رنگ",
                "تعداد صفحه",
                "نوع جلد",
                "ناشر",
                "نویسنده",
            ],
            "مجموعه داستان": [
                "رنگ",
                "تعداد صفحه",
                "نوع جلد",
                "ناشر",
                "نویسنده",
            ],
            "رمان نوجوان": ["رنگ", "تعداد صفحه", "نوع جلد", "ناشر", "رده سنی"],
            "رمان خارجی": ["رنگ", "تعداد صفحه", "نوع جلد", "ناشر", "مترجم"],
            "داستان فلسفی": [
                "رنگ",
                "تعداد صفحه",
                "نوع جلد",
                "ناشر",
                "نویسنده",
            ],
            # کتاب و فرهنگ - آموزشی
            "کتاب درسی": ["رنگ", "تعداد صفحه", "نوع جلد", "ناشر", "پایه"],
            "مهارت‌های نرم": [
                "رنگ",
                "تعداد صفحه",
                "نوع جلد",
                "ناشر",
                "نویسنده",
            ],
            "زبان‌های خارجی": ["رنگ", "تعداد صفحه", "نوع جلد", "ناشر", "زبان"],
            "برنامه‌نویسی": [
                "رنگ",
                "تعداد صفحه",
                "نوع جلد",
                "ناشر",
                "زبان برنامه‌نویسی",
            ],
            "کسب و کار": ["رنگ", "تعداد صفحه", "نوع جلد", "ناشر", "نویسنده"],
            "موفقیت": ["رنگ", "تعداد صفحه", "نوع جلد", "ناشر", "نویسنده"],
            # کتاب و فرهنگ - کودک و نوجوان
            "قصه کودکانه": ["رنگ", "تعداد صفحه", "نوع جلد", "ناشر", "رده سنی"],
            "شعر کودکان": ["رنگ", "تعداد صفحه", "نوع جلد", "ناشر", "رده سنی"],
            "کتاب آموزشی کودک": [
                "رنگ",
                "تعداد صفحه",
                "نوع جلد",
                "ناشر",
                "رده سنی",
            ],
            "کتاب مصور": ["رنگ", "تعداد صفحه", "نوع جلد", "ناشر", "رده سنی"],
            "کتاب سرگرمی": ["رنگ", "تعداد صفحه", "نوع جلد", "ناشر", "رده سنی"],
            "کتاب شعر نوجوان": [
                "رنگ",
                "تعداد صفحه",
                "نوع جلد",
                "ناشر",
                "رده سنی",
            ],
            # کتاب و فرهنگ - فرهنگی و هنری
            "هنر و نقاشی": ["رنگ", "تعداد صفحه", "نوع جلد", "ناشر", "نویسنده"],
            "عکاسی": ["رنگ", "تعداد صفحه", "نوع جلد", "ناشر", "نویسنده"],
            "تاریخ هنر": ["رنگ", "تعداد صفحه", "نوع جلد", "ناشر", "نویسنده"],
            "معماری": ["رنگ", "تعداد صفحه", "نوع جلد", "ناشر", "نویسنده"],
            "موسیقی": ["رنگ", "تعداد صفحه", "نوع جلد", "ناشر", "نویسنده"],
            "طراحی داخلی": ["رنگ", "تعداد صفحه", "نوع جلد", "ناشر", "نویسنده"],
            # خودرو و ابزار - لوازم جانبی خودرو
            "روکش صندلی": ["رنگ", "سایز", "جنس", "مدل خودرو", "برند"],
            "فرش کفی": ["رنگ", "سایز", "جنس", "مدل خودرو", "برند"],
            "نگهدارنده موبایل": ["رنگ", "نوع نصب", "جنس", "مدل خودرو", "برند"],
            "دوربین خودرو": ["رنگ", "رزولوشن", "نوع", "مدل خودرو", "برند"],
            "پاوربانک فندکی": ["رنگ", "ظرفیت", "تعداد پورت", "وات", "برند"],
            "اسپری تمیزکننده": ["رنگ", "ظرفیت", "نوع", "کاربرد", "برند"],
            # خودرو و ابزار - ابزار دستی
            "پیچ‌گوشتی": ["رنگ", "سایز", "جنس", "نوع سری", "برند"],
            "آچار": ["رنگ", "سایز", "جنس", "نوع", "برند"],
            "چکش": ["رنگ", "وزن", "جنس", "نوع", "برند"],
            "متر": ["رنگ", "طول", "جنس", "نوع", "برند"],
            "انبردست": ["رنگ", "سایز", "جنس", "نوع", "برند"],
            "تیغ و رنده": ["رنگ", "سایز", "جنس", "نوع", "برند"],
            # خودرو و ابزار - ابزار برقی
            "دریل": ["رنگ", "قدرت", "نوع", "باتری/سیمی", "برند"],
            "فرز": ["رنگ", "قدرت", "نوع", "باتری/سیمی", "برند"],
            "اره برقی": ["رنگ", "قدرت", "طول تیغه", "باتری/سیمی", "برند"],
            "پولیش": ["رنگ", "قدرت", "نوع", "باتری/سیمی", "برند"],
            "جاروبرقی صنعتی": ["رنگ", "قدرت", "ظرفیت", "نوع", "برند"],
            "سنگ‌فرز": ["رنگ", "قدرت", "نوع", "باتری/سیمی", "برند"],
            # خودرو و ابزار - لوازم مراقبت خودرو
            "واکس بدنه": ["رنگ", "ظرفیت", "نوع", "کاربرد", "برند"],
            "شامپو بدنه": ["رنگ", "ظرفیت", "نوع", "کاربرد", "برند"],
            "واکس داشبورد": ["رنگ", "ظرفیت", "نوع", "کاربرد", "برند"],
            "پولیش": ["رنگ", "ظرفیت", "نوع", "کاربرد", "برند"],
            "اسپری لاستیک": ["رنگ", "ظرفیت", "نوع", "کاربرد", "برند"],
            "دستمال میکروفایبر": ["رنگ", "ابعاد", "جنس", "کاربرد", "برند"],
        }
        return features_mapping.get(category_name, ["رنگ", "سایز", "برند"])

    def get_feature_options(self, feature_name):

        options_mapping = {
            "رنگ": [
                "مشکی",
                "سفید",
                "نقره‌ای",
                "طلایی",
                "آبی",
                "قرمز",
                "سبز",
                "بنفش",
                "صورتی",
                "نارنجی",
            ],
            "سایز": ["XS", "S", "M", "L", "XL", "XXL", "XXXL"],
            "جنس": [
                "پنبه",
                "پلی‌استر",
                "چرم",
                "نخ",
                "پشم",
                "کتان",
                "ابریشم",
                "نایلون",
            ],
            "حافظه داخلی": ["32GB", "64GB", "128GB", "256GB", "512GB", "1TB"],
            "RAM": ["2GB", "4GB", "6GB", "8GB", "12GB", "16GB", "32GB"],
            "اندازه صفحه نمایش": [
                "5 اینچ",
                "6 اینچ",
                "6.5 اینچ",
                "7 اینچ",
                "10 اینچ",
                "13 اینچ",
                "15 اینچ",
                "17 اینچ",
                "24 اینچ",
                "27 اینچ",
            ],
            "دوربین اصلی": [
                "12MP",
                "16MP",
                "20MP",
                "24MP",
                "32MP",
                "48MP",
                "64MP",
                "108MP",
            ],
            "دوربین سلفی": ["8MP", "12MP", "16MP", "20MP", "24MP", "32MP"],
            "باتری": [
                "2000mAh",
                "3000mAh",
                "4000mAh",
                "5000mAh",
                "6000mAh",
                "8000mAh",
            ],
            "طول کابل": [
                "0.5 متر",
                "1 متر",
                "1.5 متر",
                "2 متر",
                "3 متر",
                "5 متر",
            ],
            "وات": ["10W", "18W", "25W", "45W", "65W", "100W", "120W"],
            "نوع اتصال": [
                "USB-C",
                "Micro-USB",
                "Lightning",
                "USB-A",
                "Bluetooth",
                "Wi-Fi",
            ],
            "تعداد پورت": ["1 پورت", "2 پورت", "3 پورت", "4 پورت", "6 پورت"],
            "نسخه USB": ["2.0", "3.0", "3.1", "3.2", "4.0"],
            "مدل گوشی": [
                "iPhone",
                "Samsung",
                "Xiaomi",
                "Huawei",
                "Oppo",
                "Vivo",
            ],
            "میکروفون": ["دارد", "ندارد"],
            "قابلیت نویزکنسلی": ["دارد", "ندارد"],
            "وات خروجی": ["5W", "10W", "15W", "20W", "25W"],
            "نوع باتری": ["لیتیوم", "لیتیوم-پلیمر", "نیکل-کادمیوم"],
            "پردازنده": [
                "Intel Core i3",
                "Intel Core i5",
                "Intel Core i7",
                "Intel Core i9",
                "AMD Ryzen 3",
                "AMD Ryzen 5",
                "AMD Ryzen 7",
            ],
            "کارت گرافیک": [
                "Intel HD",
                "NVIDIA GTX",
                "NVIDIA RTX",
                "AMD Radeon",
            ],
            "سیستم عامل": ["Windows", "macOS", "Linux", "Chrome OS"],
            "منبع تغذیه": ["500W", "600W", "700W", "800W", "1000W"],
            "رزولوشن": ["HD", "Full HD", "2K", "4K", "8K"],
            "نرخ تازه سازی": ["60Hz", "75Hz", "120Hz", "144Hz", "240Hz"],
            "نوع پنل": ["IPS", "TN", "VA", "OLED"],
            "پورت‌ها": ["HDMI", "DisplayPort", "VGA", "USB-C"],
            "مکانیکی/غیرمکانیکی": ["مکانیکی", "غیرمکانیکی"],
            "RGB": ["دارد", "ندارد"],
            "نسخه HDMI": ["1.4", "2.0", "2.1"],
            "پوشش": ["طلا", "نقره", "مس"],
            "نوع کانکتور": ["Type A", "Type B", "Type C"],
            "نوع خنک کننده": ["هوا", "آب"],
            "تعداد ماژول": ["1", "2", "4", "8"],
            "تایمینگ": ["CL16", "CL18", "CL19", "CL20"],
            "قدرت": ["50W", "100W", "200W", "500W", "1000W"],
            "تعداد بلندگو": ["2.0", "2.1", "5.1", "7.1"],
            "فرمت‌های پشتیبانی": ["MP3", "MP4", "AVI", "MKV", "DVD"],
            "شدت روشنایی": [
                "1000 lumens",
                "2000 lumens",
                "3000 lumens",
                "4000 lumens",
            ],
            "کنتراست": ["1000:1", "2000:1", "3000:1", "5000:1"],
            "فاصله پرتاب": ["1-2 متر", "2-3 متر", "3-4 متر", "4-5 متر"],
            "قابلیت ضد آب": ["IP67", "IP68", "دارد", "ندارد"],
            "امپدانس": ["16Ω", "32Ω", "64Ω", "128Ω"],
            "جنس": ["پلاستیک", "فلز", "چوب", "شیشه"],
            "قابلیت فست شارژ": ["دارد", "ندارد"],
            "ولتاژ خروجی": ["5V", "9V", "12V", "15V", "20V"],
            "ابعاد": ["کوچک", "متوسط", "بزرگ", "خیلی بزرگ"],
            "تعداد بخش": ["1 بخش", "2 بخش", "3 بخش", "4 بخش"],
            "قابلیت ضد آب": ["دارد", "ندارد"],
            "ظرفیت": ["16GB", "32GB", "64GB", "128GB", "256GB"],
            "سرعت": ["Class 10", "UHS-I", "UHS-II", "UHS-III"],
            "کلاس": ["Class 4", "Class 6", "Class 10"],
            "فرمت": ["SD", "microSD", "CF", "XD"],
            "طرح": ["ساده", "طرح دار", "گرافیکی", "نقش برجسته"],
            "آستین": ["کوتاه", "بلند"],
            "یقه": ["یقه دار", "بدون یقه", "یقه هفت"],
            "قد": ["کوتاه", "بلند", "دمپا"],
            "نوع کفش": ["کفش ورزشی", "کفش رسمی", "کفش کژوال", "کفش راحتی"],
            "کاربرد": ["روزمره", "ورزشی", "مجلسی", "کار"],
            "ب buckle": ["فلزی", "پلاستیکی", "چرمی"],
            "عرض": ["2cm", "3cm", "4cm", "5cm"],
            "نوع حرکت": ["کوارتز", "اتوماتیک", "مکانیکی"],
            "قابلیت‌ها": ["ضد آب", "تقویم", "کرونوگراف", "GPS"],
            "پاشنه": ["تخت", "کوتاه", "متوسط", "بلند"],
            "دسته": ["تک دسته", "دو دسته", "بدون دسته"],
            "قفل": ["قفل دار", "بدون قفل"],
            "ضخامت": ["نازک", "متوسط", "ضخیم"],
            "رده سنی": ["نوزاد", "1-3 سال", "3-6 سال", "6-12 سال", "نوجوان"],
            "طول": ["کوتاه", "متوسط", "بلند"],
            "نوع سنگ": ["الماس", "یاقوت", "زمرد", "مروارید", "کریستال"],
            "UV protection": ["UV400", "UV100%", "دارد", "ندارد"],
            "نوع کلاه": ["بیسبال", "باکت", "بیرونی", "لبه دار"],
            "نوع": ["یخچال معمولی", "یخچال فراست", "یخچال ساید بای ساید"],
            "برند": ["سامسونگ", "ال جی", "پاناسونیک", "توشیبا", "هایسنس"],
            "تعداد برنامه": ["5 برنامه", "7 برنامه", "10 برنامه", "12 برنامه"],
            "جنس پارچه": ["پنبه", "میکروفایبر", "بامبو", "لینن"],
            "تعداد تکه": ["2 تکه", "3 تکه", "4 تکه", "6 تکه", "8 تکه"],
            "نوع پر": ["پر طبیعی", "پر مصنوعی", "میموری فوم"],
            "وزن": ["سبک", "متوسط", "سنگین"],
            "نوع پوست": ["چرب", "خشک", "معمولی", "حساس", "ترکیبی"],
            "SPF": ["SPF15", "SPF30", "SPF50", "SPF50+"],
            "کاربرد": ["مرطوب کننده", "آبرسان", "ضد چروک", "روشن کننده"],
            "نوع مو": ["چرب", "خشک", "معمولی", "حساس", "رنگی"],
            "پوشش": ["سبک", "متوسط", "سنگین", "فول کاور"],
            "مقاومت": ["24 ساعت", "12 ساعت", "8 ساعت", "5 ساعت"],
            "تعداد رنگ": ["1 رنگ", "2 رنگ", "4 رنگ", "6 رنگ", "8 رنگ"],
            "سختی مو": ["نرم", "متوسط", "سفت"],
            "الکل": ["70%", "80%", "90%", "95%"],
            "برنامه": ["8 برنامه", "12 برنامه", "16 برنامه", "20 برنامه"],
            "نوع ورزش": ["دویدن", "بدنسازی", "کوهنوردی", "فوتبال", "بسکتبال"],
            "ظرفیت": ["20 لیتر", "30 لیتر", "40 لیتر", "50 لیتر", "60 لیتر"],
            "دمای مناسب": ["+5°C", "0°C", "-5°C", "-10°C", "-20°C"],
            "نوع باتری": ["AA", "AAA", "لیتیوم", "قابل شارژ"],
            "نور": ["LED", "هالوژن", "زنون"],
            "سوخت": ["گاز", "بنزین", "الکل جامد"],
            "دقت": ["0.1kg", "0.2kg", "0.5kg", "1kg"],
            "تعداد بازیکن": ["1 نفر", "2 نفر", "4 نفر", "6 نفر"],
            "ناشر": ["نشر چشمه", "نشر نی", "نشر مرکز", "نشر امیرکبیر"],
            "نویسنده": ["ایرانی", "خارجی"],
            "مترجم": ["حرفه ای", "معمولی"],
            "پایه": ["اول", "دوم", "سوم", "چهارم", "پنجم", "ششم"],
            "زبان": ["انگلیسی", "فرانسوی", "آلمانی", "اسپانیایی", "ایتالیایی"],
            "زبان برنامه‌نویسی": ["Python", "JavaScript", "Java", "C++", "PHP"],
            "مدل خودرو": ["پراید", "پژو", "تیبا", "دنا", "ساینا"],
            "نوع نصب": ["چسبی", "مغناطیسی", "مکشی"],
            "نوع سری": ["خورشیدی", "ستاره ای", "فیلیپس", "آلن"],
            "طول تیغه": ["10cm", "20cm", "30cm", "40cm", "50cm"],
            "باتری/سیمی": ["باتری", "سیمی"],
        }
        return options_mapping.get(feature_name, ["بله", "خیر", "نامشخص"])

    @transaction.atomic
    def handle(self, *args, **options):
        force = options["force"]
        all_categories = ProductCategoryModel.objects.all()

        created_features = 0
        created_options = 0

        for category in all_categories:
            self.stdout.write(f"Processing category: {category.name}")
            feature_names = self.get_category_features(category.name)
            for feature_name in feature_names:
                feature, created = CategoryFeatureModel.objects.get_or_create(
                    category=category,
                    name=feature_name,
                    defaults={"is_required": True},
                )
                if created:
                    created_features += 1
                    self.stdout.write(
                        self.style.SUCCESS(
                            f" Feature '{feature_name}' created"
                        )
                    )
                elif force:
                    feature.delete()
                    feature = CategoryFeatureModel.objects.create(
                        category=category, name=feature_name, is_required=True
                    )
                    created_features += 1
                    self.stdout.write(
                        self.style.WARNING(
                            f" Feature '{feature_name}' rebuilt"
                        )
                    )
                else:
                    self.stdout.write(
                        self.style.NOTICE(
                            f" Feature '{feature_name}' already exists"
                        )
                    )

                option_values = self.get_feature_options(feature_name)
                for option_value in option_values:
                    option, option_created = (
                        FeatureOptionModel.objects.get_or_create(
                            feature=feature, value=option_value
                        )
                    )
                    if option_created:
                        created_options += 1
                        self.stdout.write(
                            self.style.SUCCESS(
                                f"Option '{option_value}' created"
                            )
                        )

        self.stdout.write(
            self.style.SUCCESS(
                f"\nCompleted!"
                f"\n• Number of categories processed: {all_categories.count()}"
                f"\n• Number of features created: {created_features}"
                f"\n• Number of options created: {created_options}"
            )
        )
